!function(e){function o(o){if(e.facebox.settings.inited)return!0;e.facebox.settings.inited=!0,e(document).trigger("init.facebox"),function(){var o=e.facebox.settings;o.loadingImage=o.loading_image||o.loadingImage,o.closeImage=o.close_image||o.closeImage,o.imageTypes=o.image_types||o.imageTypes,o.faceboxHtml=o.facebox_html||o.faceboxHtml}();var a=e.facebox.settings.imageTypes.join("|");e.facebox.settings.imageTypesRegexp=new RegExp(".("+a+")$","i"),o&&e.extend(e.facebox.settings,o),e("body").append(e.facebox.settings.faceboxHtml);var c=[new Image,new Image];c[0].src=e.facebox.settings.closeImage,c[1].src=e.facebox.settings.loadingImage,e("#facebox").find(".b:first, .bl").each(function(){c.push(new Image),c.slice(-1).src=e(this).css("background-image").replace(/url\((.+)\)/,"$1")}),e("#facebox .close").click(e.facebox.close),e("#facebox .close_image").attr("src",e.facebox.settings.closeImage)}function a(){var e,o;return self.pageYOffset?(o=self.pageYOffset,e=self.pageXOffset):document.documentElement&&document.documentElement.scrollTop?(o=document.documentElement.scrollTop,e=document.documentElement.scrollLeft):document.body&&(o=document.body.scrollTop,e=document.body.scrollLeft),new Array(e,o)}function c(){var e;return self.innerHeight?e=self.innerHeight:document.documentElement&&document.documentElement.clientHeight?e=document.documentElement.clientHeight:document.body&&(e=document.body.clientHeight),e}function n(o,a){if(o.match(/#/)){var c=window.location.href.split("#")[0],n=o.replace(c,"");if("#"==n)return;e.facebox.reveal(e(n).html(),a)}else o.match(e.facebox.settings.imageTypesRegexp)?t(o,a):i(o,a)}function t(o,a){var c=new Image;c.onload=function(){e.facebox.reveal('<div class="image"><img src="'+c.src+'" /></div>',a)},c.src=o}function i(o,a){var c="&";-1===o.indexOf("?",0)&&(c="?"),e.getJSON(o+c+"tagmode=any&format=json&jsoncallback=?",function(o){e.facebox.reveal(o.html,a)})}function s(){return 0==e.facebox.settings.overlay||null===e.facebox.settings.opacity}e.facebox=function(o,a){e.facebox.loading(),o.ajax?i(o.ajax,a):o.image?t(o.image,a):o.div?n(o.div,a):e.isFunction(o)?o.call(e):e.facebox.reveal(o,a)},e.extend(e.facebox,{settings:{opacity:.2,overlay:!0,loadingImage:baseURL+"images/facebox/loading.gif",closeImage:baseURL+"images/facebox/closelabel.png",imageTypes:["png","jpg","jpeg","gif"],faceboxHtml:'\n    <div id="facebox" style="display:none;"> \n      <div class="popup"> \n        <div class="content"> \n        </div> \n        <a href="#" class="close"><img src="images/facebox/closelabel.png" title="close" class="close_image" /></a> \n      </div> \n    </div>'},loading:function(){return o(),1==e("#facebox .loading").length||(s()||(0==e("#facebox_overlay").length&&e("body").append('<div id="facebox_overlay" class="facebox_hide"></div>'),e("#facebox_overlay").hide().addClass("facebox_overlayBG").css("opacity",e.facebox.settings.opacity).fadeIn(200)),e("#facebox .content").empty(),e("#facebox .body").children().hide().end().append('<div class="loading"><img src="'+e.facebox.settings.loadingImage+'"/></div>'),e("#facebox").css({top:a()[1]+c()/10,left:e(window).width()/2-205}).show(),e(document).bind("keydown.facebox",function(o){return 27==o.keyCode&&e.facebox.close(),!0}),void e(document).trigger("loading.facebox"))},reveal:function(o,a){e(document).trigger("beforeReveal.facebox"),a&&e("#facebox .content").addClass(a),e("#facebox .content").append(o),e("#facebox .loading").remove(),e("#facebox .body").children().fadeIn("normal"),e("#facebox").css("left",e(window).width()/2-e("#facebox .popup").width()/2),e(document).trigger("reveal.facebox").trigger("afterReveal.facebox")},close:function(){return e(document).trigger("close.facebox"),!1}}),e.fn.facebox=function(a){if(0!=e(this).length)return o(a),this.bind("click.facebox",function(){e.facebox.loading(!0);var o=this.rel.match(/facebox\[?\.(\w+)\]?/);return o&&(o=o[1]),n(this.href,o),!1})},e(document).bind("close.facebox",function(){e(document).unbind("keydown.facebox"),e("#facebox").fadeOut(function(){e("#facebox .content").removeClass().addClass("content"),e("#facebox .loading").remove(),e(document).trigger("afterClose.facebox")}),s()||e("#facebox_overlay").fadeOut(200,function(){e("#facebox_overlay").removeClass("facebox_overlayBG"),e("#facebox_overlay").addClass("facebox_hide"),e("#facebox_overlay").remove()})})}(jQuery);